let myCharts;const wheel=document.getElementById("wheel"),spinBtn=document.getElementById("spin-btn"),finalValue=document.getElementById("final-value");var winnumber=0;function makeSpin(e){wheel.innerHTML="";const{val1:n,val3:t,val5:a,val7:i}=e,s=[{minDegree:0,maxDegree:45,value:i},{minDegree:46,maxDegree:90,value:"0"},{minDegree:91,maxDegree:135,value:a},{minDegree:136,maxDegree:180,value:"0"},{minDegree:181,maxDegree:225,value:t},{minDegree:226,maxDegree:270,value:"0"},{minDegree:271,maxDegree:315,value:n},{minDegree:316,maxDegree:360,value:"0"}];myCharts=new Chart(wheel,{plugins:[ChartDataLabels],type:"pie",data:{labels:[n,"0.00",t,"0.00",a,"0.00",i,"0.00"],datasets:[{backgroundColor:["#8d01f8","#ca016f","#fb3501","#fc9e02","#f1dc19","#62c52f","#0760ed","#2c13f8"],data:[16,16,16,16,16,16,16,16]}]},options:{responsive:!0,animation:{duration:0},plugins:{tooltip:!1,legend:{display:!1},datalabels:{color:"#ffffff",formatter:(e,n)=>n.chart.data.labels[n.dataIndex],font:{size:18},display:"none"}}}});let l=0;spinBtn.addEventListener("click",(function(){finalValue.innerHTML="Wait...",spinBtn.disabled=!0;const e=function(e=4e3,n=5e3){return Math.ceil(Math.random()*(n-e)+e)}();wheel.style.transform=`rotate(${e}deg)`,l+=e,setTimeout((()=>{(e=>{for(let n of s)if(e>=n.minDegree&&e<=n.maxDegree){finalValue.innerHTML=`<p>Value: ${n.value}</p>`,spinBtn.disabled=!1,winnumber=n.value;break}setTimeout(getWunner,1e3)})(l%360)}),16500)}))}window.addEventListener("load",(function(){makeSpin({val1:"25",val3:"60",val5:"130",val7:"240"})}));const wheel_input1=document.getElementById("wheel_input1"),wheel_input3=document.getElementById("wheel_input3"),wheel_input5=document.getElementById("wheel_input5"),wheel_input7=document.getElementById("wheel_input7"),field_val_form=document.getElementById("field_val_form");function getcoin(){$.ajax({type:"POST",url:"system/ajax",data:"getusercoins=coins",success:function(e){$("#ballence").html(e)}})}function getWunner(){$.ajax({type:"POST",url:"system/ajax",data:"getWinnersspin="+winnumber,success:function(e){if(e.trim().length>0){var n=jQuery.parseJSON(e);!0===n.err?"loose"===n.messeg?popup_message("You Loose "+n.coin+" Coins","error"):popup_message(n.messeg,"error"):"success"===n.messeg?popup_message("Congratulation: You Win "+n.coin+" Coins","success"):popup_message(n.messeg,"error")}getcoin(),$("#spin-btn").hide(),$("#spin-submit").show()}})}function popup_message(e,n){const t=document.getElementById("popup_message");t&&(t.style.transition="all .5s",t.style.opacity="1",t.innerHTML="success"===n?`\n    <div id="popup_message" style="position: fixed; top: 100px; right: 20px; z-index:999; background:#237d32; color:white; display:flex; padding:12px; align-items:center; gap:6px; border-radius: 5px; line-height: 0px; ">\n    <span style="font-size:18px;">\n    <i class="fa-solid fa-check-circle"></i>\n    </span>\n    <p style="background:black;color:white;">\n    ${e} </div>\n    </p> `:`\n      <div id="popup_message" style="position: fixed; top: 100px; right: 20px; z-index:999; background:#c93a16; color:white; display:flex; padding:12px; align-items:center; gap:6px; border-radius: 5px; line-height: 0px; ">\n      <span style="font-size:18px;">\n      <i class="fa-solid fa-circle-exclamation"></i>\n      </span>\n      <p style="background:black;color:white;">\n      ${e} </div>\n      </p> `,setTimeout((()=>{t.style.opacity="0"}),2e3))}field_val_form.addEventListener("submit",(e=>{wheel.style.transform="",wheel.style.transition="none",e.preventDefault(),myCharts.destroy(),makeSpin({val1:wheel_input1.value,val3:wheel_input3.value,val5:wheel_input5.value,val7:wheel_input7.value}),wheel.style.transition="transform 16s cubic-bezier(0.5, 0.25, 0.01, 1)"})),$("#spin-submit").click((()=>{$("#spin-submit").hide();let e=$("#wheel_input1").val(),n=$("#wheel_input3").val(),t=$("#wheel_input5").val(),a=$("#wheel_input7").val();e.length<1&&n.length<1&&t.length<1&&a.length<1?(popup_message("Please Enter coin in Any Fild","error"),$("#spin-submit").show()):($.ajax({type:"POST",url:"system/ajax",data:"one="+e+"&two="+n+"&three="+t+"&four="+a,success:function(e){"success"==e.trim()?getcoin():(popup_message(e,"error"),$("#spin-submit").show())}}),$("#spin-btn").show())}));